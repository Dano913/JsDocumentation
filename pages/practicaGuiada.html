<section class="section" id="dom">
    <h1>VITE - Práctica Guiada</h1>
    <div class="intro-text">
        <p>Ahora que ya sabemos trabajar con HTML, CSS, JavaScript, hemos visto cómo generar un proyecto con Vite y el uso de los imports y exports vamos a crear nuestra primera aplicación web haciendo uso de todas estas tecnologías.</p>
        <p>En esta ocasión vamos a generar un Color Flipper, una aplicación que nos permitirá modificar el color de nuestro fondo de la aplicación seleccionando entre una gama de colores predefinidos por nosotros.</p>
        <p>Para ello vamos a volver a crear una nueva aplicación con Vite.</p>
        <pre><code class="language-javascript">
            npm create vite@latest

            ✔ Project name: color-flipper
            ✔ Select a framework: › vanilla
            ✔ Select a variant: › javascript 
        </code></pre>
        <p>Accedemos a la carpeta del proyecto, instalamos las dependencias y arrancamos el servidor de desarrollo:</p>
        <pre><code class="language-javascript">
            cd color-flipper
            npm install
            npm run dev
        </code></pre>
        <p>De esta manera ya tendremos nuestra plantilla por defecto generada por Vite con JavaScript vanilla en el enlace que nos indica la consola:</p>
        <p>Manteniendo Ctrl y haciendo click podemos acceder al link.</p>
        <p>En este punto limpiaremos nuestro proyecto:</p>
        <ul class="lista-estilizada">
            <li>Eliminaremos el fichero javascript.svg que contiene el logo de JS.</li>
            <li>Limpiaremos el fichero style.css dejándolo vacío para insertar nuestros propios estilos. Solo vamos a respetar los estilos anidados en :root para tener nuestras variables con las fuentes, los tamaños por defecto y el fondo.</li>
            <li>Eliminaremos el fichero counter.js.</li>
            <li>En el fichero main.js solo dejaremos la línea de importación de style.css</li>
        </ul>
        <p>Ahora que tenemos el proyecto con solo la estructura desde 0 podemos empezar a trabajar.</p>
        <p>Vamos a modificar nuestro fichero index.html para modificar el título por el de nuestra aplicación:</p>
        <pre><code class="language-html">
            &lt;!DOCTYPE html&gt;
            &lt;html lang=&quot;en&quot;&gt;
                &lt;head&gt;
                    &lt;meta charset=&quot;UTF-8&quot; /&gt;
                    &lt;link rel=&quot;icon&quot; type=&quot;image/svg+xml&quot; href=&quot;/vite.svg&quot; /&gt;
                    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
                    &lt;title&gt;Color Flipper&lt;/title&gt;
                &lt;/head&gt;
                &lt;body&gt;
                    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;
                    &lt;script type=&quot;module&quot; src=&quot;/main.js&quot;&gt;&lt;/script&gt;
                &lt;/body&gt;
            &lt;/html&gt;
        </code></pre>
        <p>A partir de aquí lo que vamos a hacer es modificar nuestro fichero HTML para crear la estructura del proyecto y el fichero main.js para darle toda la funcionalidad necesaria.</p>
        <p>Para crear un Color Flipper lo primero que tenemos que hacer es tener registrados una serie de colores para aplicarlos al fondo de nuestra aplicación, así que vamos a visitar la web Coolors para recopilar unos 4 o 5 colores.</p>
        <p>https://coolors.co/</p>
        <p>En este ejemplo hemos recopilado los siguientes:</p>
        <ul class="lista-estilizada">
            <li>Raisin Black: #28262C</li>
            <li>Blue Bell: #998FC7</li>
            <li>Lavender Blue: #D4C2FC</li>
            <li>Magnolia: #F9F5FF</li>
            <li>Resolution Blue: #14248A</li>
        </ul>
        <p>Podremos utilizar cualquier color que queramos.</p>
        <p>Una vez recopilada esta información lo que tenemos que tener en cuenta es que en nuestro HTML vamos a tener un fondo y dos bloques. Un bloque dirá qué color tenemos seleccionado actualmente, otro de los bloques nos permitirá seleccionar el color a través de un select y el fondo reflejará el color seleccionado.</p>
        <p>Para ello tendremos que generar una estructura de datos que nos permita seleccionar dichos datos, como lo puede ser un objeto. Así que vamos a ir a nuestro archivo main.js y definir estos colores:</p>
        <pre><code class="language-javascript">
            import './style.css'

            const COLOR_PALETTE = {
                '#28262C': 'Raisin Black',
                '#998FC7': 'Blue Bell',
                '#D4C2FC': 'Lavender Blue',
                '#F9F5FF': 'Magnolia',
                '#14248A': 'Resolution Blue'
            }
        </code></pre>
        <p>En este caso hemos utilizado el código hexadecimal como clave y el nombre del color como valor, de esta forma tenemos un objeto con los diferentes colores que vamos a utilizar.</p>
        <p>El siguiente paso será crear el esqueleto de nuestro HTML con los bloques que hemos mencionado anteriormente, para ello modificaremos dicho fichero de la siguiente forma:</p>
        <pre><code class="language-html">
            &lt;!DOCTYPE html&gt;
            &lt;html lang=&quot;en&quot;&gt;
            &lt;head&gt;
                &lt;meta charset=&quot;UTF-8&quot; /&gt;
                &lt;link rel=&quot;icon&quot; type=&quot;image/svg+xml&quot; href=&quot;/vite.svg&quot; /&gt;
                &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
                &lt;title&gt;Color Flipper&lt;/title&gt;
            &lt;/head&gt;
            &lt;body&gt;
                &lt;div id=&quot;app&quot;&gt;
                &lt;div class=&quot;block&quot;&gt;
                    &lt;h1&gt;Color de fondo:&lt;/h1&gt;
                    &lt;h2&gt;C&oacute;digo de color&lt;/h2&gt;
                &lt;/div&gt;
                &lt;div class=&quot;block&quot;&gt;
                    &lt;h2&gt;Elige un color&lt;/h2&gt;
                    &lt;select id=&quot;color-picker&quot;&gt;
                    &lt;option value=&quot;@fff&quot;&gt;-&lt;/option&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;/div&gt;
                &lt;script type=&quot;module&quot; src=&quot;/main.js&quot;&gt;&lt;/script&gt;
            &lt;/body&gt;
            &lt;/html&gt;
        </code></pre>
        <p>Hemos creado un div con la clase block que nos dirá el color de fondo (en un futuro insertaremos el código de color dinámicamente) y otro bloque con un select que nos permitirá seleccionarlo (de momento hemos puesto solo el valor del color blanco y sin texto).</p>
        <p>En este punto nuestra aplicación se verá tal que así:</p>
        <p>Vamos a darle un poco de estilo a nuestra página:</p>
        <pre><code class="language-javascript">
            :root {
                font-family: Inter, Avenir, Helvetica, Arial, sans-serif;
                font-size: 16px;
                line-height: 24px;
                font-weight: 400;
                background-color: #fff;
                font-synthesis: none;
                text-rendering: optimizeLegibility;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
                -webkit-text-size-adjust: 100%;
            }
            * {
                box-sizing: border-box;
            }

            html,body, #app {
                margin: 0;
                min-height: 100vh;
            }

            .block {
                background-color: #242424;
                color: rgba(255, 255, 255, 0.87);
                padding: 1rem;
                width: 100%;
                text-align: center;
            }

            #app{
                display: flex;
                align-items: center;
                flex-direction: column;
                justify-content: center;
                gap: 1rem;
                padding: 1rem;
            }

            #color-picker {
                min-width: 12.5rem;
                padding: 0.5rem;
                font-size: 1rem;
            }
        </code></pre>
        <p>Ahora que tenemos nuestra parte visual y la estructura de HTML preparada para funcionar, vamos a implementar dicha funcionalidad en el fichero main.js.</p>
        <p>Lo primero que vamos a generar es un montón de opciones para el select que incluyan tanto la clave como el valor de los campos de mi objeto COLOR_PALETTE.</p>
        <p>Para ello haremos uso del método Object.keys, con el cual convertiremos nuestro objeto en un array y a través de un forEach generaremos tantos options necesitemos con la longitud del mismo asignándole como valor el color en si y como texto el valor de cada una de las claves:</p>
        <pre><code class="language-javascript">
            import "./style.css";

            const COLOR_PALETTE = {
                "#28262C": "Raisin Black",
                "#998FC7": "Blue Bell",
                "#D4C2FC": "Lavender Blue",
                "#F9F5FF": "Magnolia",
                "#14248A": "Resolution Blue",
            };
        </code></pre>
        <pre><code class="language-javascript">
            const addOptionsToColorPicker = () => {
                const colorPickerSelect = document.querySelector("#color-picker");

                Object.keys(COLOR_PALETTE).forEach((color) => {
                    const option = document.createElement("option");
                    option.value = color;
                    option.innerText = COLOR_PALETTE[color];

                    colorPickerSelect.append(option);
                })
            }

            addOptionsToColorPicker()
        </code></pre>
        <p>De esta manera ya hemos “compartimentado” una de las funcionalidades que va a tener nuestra aplicación web por si en un futuro necesitamos hacer un módulo independiente con esta misma.</p>
        <p>Vamos a comprobar nuestra aplicación para ver si efectivamente está funcionando.</p>
        <p>Al haber realizado un bucle a la hora de generar las opciones, podemos aumentar en un futuro nuestro objeto tanto como queramos que nuestra aplicación funcionará exactamente igual.</p>
        <p>Lo siguiente que vamos a implementar es el cambio del color de fondo y el texto reflejado una vez seleccionado en nuestro select. Para ello vamos a hacer uso de los escuchadores de eventos.</p>
        <pre><code class="language-javascript">
            const addEventListenerToColorPicker = () => {
            const colorPickerSelect = document.querySelector("#color-picker");

                colorPickerSelect.addEventListener("change", (event) => {

                    const newColor = event.target.value;
                    //Almacenamos el código de color

                    document.body.style.backgroundColor = newColor;
                    //Le aplicamos el background color con el código de color seleccionado

                });
            };

            addOptionsToColorPicker();
            addEventListenerToColorPicker();
        </code></pre>
        <p>Lo que acabamos de hacer es añadirle al select un escuchador de eventos que cada vez que cambie gracias al evento “change” seteará el valor del target del evento (es decir, el código hexadecimal en una constante) y lo va a setear mediante estilos en linea en el body del documento.</p>
        <p>De esta forma, cada vez que se detecte un cambio en el select recuperará la opción elegida, almacenará el value de cada option y lo seteará como fondo:</p>
        <p>Lo que nos faltaría sería setear en el h2 de nuestro primer bloque el texto con el color seleccionado. Para ello vamos a ir un momento a nuestro HTML y asignarle un id a dicho h2 para poder recuperarlo de mejor manera en JavaScript:</p>
        <pre><code class="language-html">
            &lt;h2 id=&quot;color-name&quot;&gt;-&lt;/h2&gt;
        </code></pre>
        <p>Al haber recuperado el valor de la clave seleccionada podremos ver en nuestra aplicación que efectivamente nos está seteando el texto adecuado gracias al método innerText.</p>
        <p>Como extra vamos a indicarle al seteador de texto que si es undefined, como es el caso de la opción dada por guión, que nos ponga un guión gracias a un ternario.</p>
        <p>Y además podemos concatenar el código de color para que nos muestre el nombre y su código:</p>
        <pre><code class="language-javascript">
            const colorNameText = `${COLOR_PALETTE[newColor]} | ${newColor}`
            colorName.innerText = COLOR_PALETTE[newColor] ? colorNameText : "-";
        </code></pre>
        <p>Ya habríamos terminado de completar nuestra funcionalidad. Ahora el reto es darle nuestro propio toque, modificar la forma de elegir los colores (por ejemplo, a través de un input de tipo color) y completar nuestra primera aplicación web creada con Vite, HTML, CSS y JavaScript.</p>
</section>
